# SPDX-FileCopyrightText: Copyright (c) 2025 NVIDIA CORPORATION & AFFILIATES. All rights reserved.
# SPDX-License-Identifier: Apache-2.0

[build-system]
requires = ["hatchling"]
build-backend = "hatchling.build"

[project]
name = "cosmos-policy"
version = "1.0.0"
authors = [{name = "NVIDIA Corporation"}]
description = "Cosmos Policy"
requires-python = ">=3.12,<3.13"
license = {text = "Apache-2.0"}
classifiers = [
  "Development Status :: 4 - Beta",
  "Environment :: GPU :: NVIDIA CUDA",
  "Intended Audience :: Science/Research",
  "License :: OSI Approved :: Apache Software License",
  "Operating System :: POSIX :: Linux",
  "Programming Language :: Python",
  "Topic :: Scientific/Engineering :: Artificial Intelligence",
]
dependencies = [
  "attrs==25.3.0",
  "av==16.0.1",
  "boto3==1.40.49",
  "click==8.1.8",
  "cloudpickle==3.1.1",
  "diffusers==0.35.2",
  "draccus==0.11.5",
  "easydict==1.13",
  "einops==0.8.1",
  "fastapi==0.124.4",
  "h5py==3.15.1",
  "huggingface-hub==0.36.0",
  "hydra-core==1.3.2",
  "imageio==2.37.0",
  "imageio-ffmpeg==0.6.0",
  "ipdb==0.13.13",
  "json-numpy==2.1.1",
  "loguru==0.7.3",
  "matplotlib==3.10.1",
  "megatron-core==0.14.0",
  "numpy==1.26.4",
  "omegaconf==2.3.0",
  "opencv-contrib-python==4.10.0.84",
  "pillow==11.1.0",
  "pyyaml==6.0.2",
  "sentencepiece==0.2.1",
  "torch==2.7.0",
  "torchvision==0.22.0",
  "tqdm==4.67.1",
  "transformers==4.51.3",
  "uvicorn==0.38.0",
  "wandb==0.22.2",
]

[project.optional-dependencies]
dev = [
  "pytest>=8.1.0",
  "ruff==0.12.7",
  "pre-commit>=3.7.1",
]

gpu = [
  "flash-attn>=2.7.0",
  "natten>=0.21.0",
  "peft==0.13.2",
  "transformer-engine>=2.2.0",
]

[dependency-groups]
libero = [
  # Note: LIBERO, robosuite, and bddl must be installed manually:
  #   pip install -e LIBERO
  #   pip install -e robosuite
  # This installs LIBERO's own bddl and mujoco dependencies
  "gymnasium==1.2.2",
]

robocasa = [
  # Note: robocasa and robosuite must be installed manually:
  #   pip install -e robocasa
  #   pip install -e robosuite
  "gym==0.26.2",
]

aloha = [
  # Note: Install mujoco and dm_control manually for ALOHA:
  #   pip install mujoco==2.3.7 dm_control==1.0.14
  "pyquaternion",
  "rospkg",
  "pexpect==4.9.0",
  "opencv-python==4.11.0.86",
  "modern_robotics",
  "termcolor==3.1.0",
  "requests==2.32.3",
]

[tool.hatch.build.targets.sdist]
packages = ["cosmos_policy"]

[tool.hatch.build.targets.wheel]
packages = ["cosmos_policy"]
exclude = ["*_test.py"]
